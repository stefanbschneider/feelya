{% extends 'app/base.html' %}

{% block content %}
    {% if error_message %}<p><strong>{{ error_message }}</strong></p>{% endif %}

{#    text box to enter new entries #}
    <form action="" method="post" style="margin-bottom: 1cm;">
        {% csrf_token %}

        <div class="form-group">
            {{ form.entry_name.label_tag }}
            <input type="text" class="form-control" id="{{ form.entry_name.id_for_label }}" name="{{ form.entry_name.html_name }}">
            <small id="{{ form.entry_name.id_for_label }}Help" class="form-text text-muted">This can be anything you want to track: An activity, food, how you slept, stress level, etc.</small>
            <div id="{{ form.entry_name.id_for_label }}Feedback" class="invalid-feedback">{{ form.entry_name.errors }}</div>
        </div>

        <button type="submit" class="btn btn-primary">Submit</button>
    </form>

{# show top 10 most frequent entries #}
    {% if entry_counts and entry_dict|length > 0 %}
    <div class="card" style="margin-bottom: 1cm;">
        <div class="card-body">
            <div class="card-title">Suggested entries</div>
            {% for name, count in entry_counts.items %}
                <form method="post" action="{% url 'app:add' name %}" style="display: inline-block;">
                    {% csrf_token %}
                    <button type="submit" class="btn btn-primary" name="{{ name }}">{{ name }}</button>
                </form>
            {% endfor %}
        </div>
    </div>
    {% endif %}

{# show previously tracked entries #}
    <div class="container-fluid">
        <ul>
        {% for day, entries in entry_dict.items %}
            <li>{{ day }}</li>
            <ul>
                {% for e in entries %}
                    <li>{{ e.name }}</li>
                {% endfor %}
            </ul>
        {% endfor %}
        </ul>
    </div>

{% endblock %}
